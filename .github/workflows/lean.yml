name: Lean

on:
  push:
    branches: [ "master" ]
    paths: ['specifications/**']
  pull_request:
    branches: [ "master" ]
    paths: ['specifications/**']

permissions:
  contents: read

jobs:
  lean-syntax:
    runs-on: ubuntu-latest

    steps:
    - name: '📥 Checkout repository'
      uses: actions/checkout@v3

    - name: ✏️ Set up Lean
      run: |
        wget https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh && chmod +x elan-init.sh && ./elan-init.sh -y && rm -f elan-init.sh
        cd specifications
        leanpkg configure
        lean -v
        cd -

    - name: 🧪 Verify Lean specs syntax
      run: lean --recursive .
